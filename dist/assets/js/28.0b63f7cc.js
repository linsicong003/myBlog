(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{320:function(v,_,t){"use strict";t.r(_);var a=t(0),s=Object(a.a)({},function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("p",[v._v("欢迎回来！ 😄")]),v._v(" "),t("p",[v._v("这里是每日练题系列。")]),v._v(" "),t("p",[v._v("这个系列会先分享昨天问题的答案并提出新的问题。")]),v._v(" "),t("h2",{attrs:{id:"回顾上期"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#回顾上期","aria-hidden":"true"}},[v._v("#")]),v._v(" 回顾上期")]),v._v(" "),t("p",[v._v("上期我们提出的问题是：")]),v._v(" "),t("p",[v._v("⭐️ "),t("strong",[v._v("请简述 "),t("code",[v._v("XSS攻击")]),v._v(" 和 "),t("code",[v._v("CSRF攻击")]),v._v(" 的原理并谈谈在 WEB 领域的一些主要防范手段")])]),v._v(" "),t("h2",{attrs:{id:"答案公布"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#答案公布","aria-hidden":"true"}},[v._v("#")]),v._v(" 答案公布")]),v._v(" "),t("p",[v._v("网络安全是一门高深莫测的学问，我们的问题其实只是揭开了其中的冰山一角。")]),v._v(" "),t("h3",{attrs:{id:"csrf-攻击"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#csrf-攻击","aria-hidden":"true"}},[v._v("#")]),v._v(" CSRF 攻击 🎏")]),v._v(" "),t("p",[v._v("跨站请求伪造(CSRF, Cross-site request forgery) 是一种挟持用户在当前已登录的 WEB 应用上执行非本意的操作的攻击方法。")]),v._v(" "),t("p",[v._v("我们从一个真实的故事开始讲起：")]),v._v(" "),t("p",[v._v("2009年，一名黑客利用 "),t("code",[v._v("CSRF")]),v._v(" 通过Gmail的成功攻击成功窃取了好莱坞明星Vanessa Hudgens的邮箱。")]),v._v(" "),t("p",[v._v("攻击非常简单，通过在发送图片的链接做手脚，能轻易的获取到邮箱里的所有邮件。")]),v._v(" "),t("p",[v._v("流程是这样的：")]),v._v(" "),t("ul",[t("li",[v._v("黑客给她发送了一封电子邮件")]),v._v(" "),t("li",[v._v("当她点击电子邮件里的某张图片时，实际访问的是某个设置邮件转发的链接")])]),v._v(" "),t("p",[v._v("从这个例子中可以反映出 "),t("code",[v._v("CSRF")]),v._v(" 攻击的本质，就是通过构造链接让浏览器发送 "),t("code",[v._v("GET")]),v._v(" 请求从而盗用用户的登录信息。")]),v._v(" "),t("h3",{attrs:{id:"xss-攻击"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#xss-攻击","aria-hidden":"true"}},[v._v("#")]),v._v(" XSS 攻击 🎏")]),v._v(" "),t("p",[v._v("跨站脚本攻击(XSS, Cross Site Scripting)是一种经常出现在web应用中的计算机安全漏洞，它允许恶意web用户将代码植入到提供给其它用户使用的页面中。")]),v._v(" "),t("div",{staticClass:"tip custom-block"},[t("p",[v._v("因为 "),t("code",[v._v("CSS")]),v._v(" 的缩写先一步被 "),t("code",[v._v("层叠样式表")]),v._v(" 占了，所以它的名字缩写就改成了 "),t("code",[v._v("XSS")]),v._v(" 啦~")])]),v._v(" "),t("p",[v._v("常见的是这些代码包含 "),t("code",[v._v("HTML")]),v._v(" 和 "),t("code",[v._v("JavaScript")]),v._v("。")]),v._v(" "),t("p",[t("code",[v._v("XSS")]),v._v(" 因为是直接执行代码，所以它的危害比较大，主要有那么几种：")]),v._v(" "),t("ul",[t("li",[v._v("盗取各类账号")]),v._v(" "),t("li",[v._v("控制敏感数据")]),v._v(" "),t("li",[v._v("非法转账")]),v._v(" "),t("li",[v._v("强制盗权操作，例如服务器被劫持做肉鸡")]),v._v(" "),t("li",[v._v("网站挂木马")])]),v._v(" "),t("p",[v._v("从实践的角度讲解 "),t("code",[v._v("XSS")]),v._v(" 的利用方式主要有那么几种：")]),v._v(" "),t("p",[v._v("⭐️ "),t("strong",[v._v("反射型")])]),v._v(" "),t("p",[v._v("反射型 "),t("code",[v._v("XSS")]),v._v("，也叫非持久型 "),t("code",[v._v("XSS")]),v._v("，是指发生请求时，XSS代码出现在请求URL中，作为参数提交到服务器，服务器解析并响应。响应结果中包含 "),t("code",[v._v("XSS")]),v._v(" 代码，最后浏览器解析并执行。")]),v._v(" "),t("p",[v._v("我们用个简单输入框的例子来说明这个问题：")]),v._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[v._v("<")]),v._v("form action"),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[v._v('"action"')]),v._v(" method"),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[v._v('"post"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v(">")]),v._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v("<")]),v._v("input type"),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[v._v('"text"')]),v._v(" name"),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[v._v('"name"')]),v._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v(">")]),v._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v("<")]),v._v("input type"),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[v._v('"submit"')]),v._v(" value"),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[v._v('"提交"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v(">")]),v._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v("/")]),v._v("form"),t("span",{pre:!0,attrs:{class:"token operator"}},[v._v(">")]),v._v("\n")])]),v._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[v._v("1")]),t("br"),t("span",{staticClass:"line-number"},[v._v("2")]),t("br"),t("span",{staticClass:"line-number"},[v._v("3")]),t("br"),t("span",{staticClass:"line-number"},[v._v("4")]),t("br")])]),t("p",[v._v("我们这里构建了一个输入框，提交后可以将数据提交到服务端，并回传给客户端。")]),v._v(" "),t("p",[v._v("我们试着输入这么一串代码 "),t("code",[v._v("<script>alert('hack')<\/script>")]),v._v("，接着我们打开浏览器查看结果。")]),v._v(" "),t("p",[t("img",{attrs:{src:"https://blog-img-1252360401.cos.ap-guangzhou.myqcloud.com/20191102-1.png",alt:"hack"}})]),v._v(" "),t("p",[v._v("可以看到服务端回传的数据把我们的代码给执行了。")]),v._v(" "),t("p",[v._v("这种类型的攻击流向是 "),t("strong",[v._v("前端 --\x3e 后端 --\x3e 前端")])]),v._v(" "),t("p",[v._v("⭐️ "),t("strong",[v._v("存储型")])]),v._v(" "),t("p",[v._v("存储型 "),t("code",[v._v("XSS")]),v._v("，也叫持久型 "),t("code",[v._v("XSS")]),v._v("，代码是存储在服务器中的，如在个人信息或发表文章等地方，插入代码，如果没有过滤或过滤不严，那么这些代码将储存到服务器中，用户访问该页面的时候触发代码执行。")]),v._v(" "),t("p",[v._v("与上面类似，只是这次的攻击代码换成是在后端可以执行的代码，通常为 "),t("code",[v._v("SQL语句")]),v._v("。")]),v._v(" "),t("p",[v._v("这种类型的攻击流向是 "),t("strong",[v._v("前端 --\x3e 后端 --\x3e 数据库 --\x3e 后端 --\x3e 前端")])]),v._v(" "),t("p",[v._v("⭐️ "),t("strong",[v._v("DOM型")])]),v._v(" "),t("p",[v._v("不经过后端，"),t("code",[v._v("DOM-XSS")]),v._v(" 漏洞是基于 "),t("code",[v._v("文档对象模型")]),v._v("(Document Objeet Model,DOM)的一种漏洞，"),t("code",[v._v("DOM-XSS")]),v._v(" 是通过 URL 传入参数去控制触发的，其实也属于反射型 "),t("code",[v._v("XSS")]),v._v(" 的一种。")]),v._v(" "),t("p",[v._v("这种攻击的思路与 "),t("code",[v._v("反射型 XSS")]),v._v(" 的思路相似，只是插入的攻击代码为一个 "),t("code",[v._v("DOM节点")]),v._v("。")]),v._v(" "),t("h2",{attrs:{id:"攻击防范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#攻击防范","aria-hidden":"true"}},[v._v("#")]),v._v(" 攻击防范")]),v._v(" "),t("h3",{attrs:{id:"csrf-防范思路"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#csrf-防范思路","aria-hidden":"true"}},[v._v("#")]),v._v(" CSRF 防范思路 🎏")]),v._v(" "),t("p",[v._v("关于 "),t("code",[v._v("CSRF")]),v._v(" 的防范要从他的攻击原理入手，主要有那么两个方法：")]),v._v(" "),t("p",[v._v("⭐️ "),t("strong",[v._v("检查Referer字段")])]),v._v(" "),t("p",[v._v("HTTP头中有一个Referer字段，这个字段用以标明请求来源于哪个地址。在处理敏感数据请求时，通常来说，Referer字段应和请求的地址位于同一域名下。")]),v._v(" "),t("p",[v._v("⭐️ "),t("strong",[v._v("添加校验token")])]),v._v(" "),t("p",[v._v("由于CSRF的本质在于攻击者欺骗用户去访问自己设置的地址，所以如果要求在访问敏感数据请求时，要求用户浏览器提供不保存在cookie中，并且攻击者无法伪造的数据作为校验，那么攻击者就无法再运行CSRF攻击。")]),v._v(" "),t("h3",{attrs:{id:"xss-防范思路"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#xss-防范思路","aria-hidden":"true"}},[v._v("#")]),v._v(" XSS 防范思路 🎏")]),v._v(" "),t("p",[t("code",[v._v("XSS")]),v._v(" 的攻击主要是将非法信息注入到我们的程序中，所以我们需要非常小心进行防范。")]),v._v(" "),t("p",[v._v("对于 "),t("code",[v._v("XSS")]),v._v(" 攻击没有一劳永逸的办法，只能是多管齐下，跟攻击者斗智斗勇。")]),v._v(" "),t("p",[v._v("我们有这么一些比较常规的思路：")]),v._v(" "),t("ul",[t("li",[v._v("⭐️ 前端表单提交前进行转义过滤")]),v._v(" "),t("li",[v._v("⭐️ 尽量避免使用不安全的 API, 如 "),t("code",[v._v("innerHTML")]),v._v("、"),t("code",[v._v("outerHTML")]),v._v("、"),t("code",[v._v("document.write()")]),v._v(" 、"),t("code",[v._v("v-html")]),v._v(" 和 "),t("code",[v._v("dangerouslySetInnerHTML")])]),v._v(" "),t("li",[v._v("⭐️ 严格的 "),t("code",[v._v("CSP")]),v._v(" (Content Security Policy)")]),v._v(" "),t("li",[v._v("⭐️ 输入内容长度控制")]),v._v(" "),t("li",[v._v("⭐️ HTTP-only Cookie")]),v._v(" "),t("li",[v._v("⭐️ 验证码")])]),v._v(" "),t("h3",{attrs:{id:"参考资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[v._v("#")]),v._v(" 参考资料 🎏")]),v._v(" "),t("ul",[t("li",[v._v("https://baijiahao.baidu.com/s?id=1618267672561552800&wfr=spider&for=pc")]),v._v(" "),t("li",[v._v("https://zh.wikipedia.org/wiki/%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0")]),v._v(" "),t("li",[v._v("https://www.cnblogs.com/mao2080/p/9460397.html")]),v._v(" "),t("li",[v._v("https://tech.meituan.com/2018/09/27/fe-security.html")])]),v._v(" "),t("h2",{attrs:{id:"提问"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#提问","aria-hidden":"true"}},[v._v("#")]),v._v(" 提问")]),v._v(" "),t("p",[v._v("讲解完了昨天的问题，又到了今天的提问环节啦~")]),v._v(" "),t("h3",{attrs:{id:"背景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#背景","aria-hidden":"true"}},[v._v("#")]),v._v(" 背景 🎏")]),v._v(" "),t("p",[t("code",[v._v("数据结构")]),v._v(" 的学习对于日常编码有着很好的启示作用。")]),v._v(" "),t("p",[v._v("有人说，不学习 "),t("code",[v._v("数据结构")]),v._v(" 一样可以编写业务代码，为什么我们要纠结于这些看不懂的概念呢？")]),v._v(" "),t("p",[v._v("希望在学习后能找到这个问题的答案！ 😏")]),v._v(" "),t("h3",{attrs:{id:"今日提问"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#今日提问","aria-hidden":"true"}},[v._v("#")]),v._v(" 今日提问 🎏")]),v._v(" "),t("p",[v._v("基础 "),t("code",[v._v("数据结构")]),v._v(" 对于前端开发一样具有增益作用。")]),v._v(" "),t("p",[v._v("今天的问题是：")]),v._v(" "),t("p",[v._v("⭐️ "),t("strong",[v._v("请使用JS实现栈、队列、链表和二叉树")])])])},[],!1,null,null,null);_.default=s.exports}}]);