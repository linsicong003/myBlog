(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{295:function(a,t,s){"use strict";s.r(t);var n=s(0),e=Object(n.a)({},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("欢迎回来！ 😄")]),a._v(" "),s("p",[a._v("这里是每日练题系列。")]),a._v(" "),s("p",[a._v("这个系列会先分享昨天问题的答案并提出新的问题。")]),a._v(" "),s("h2",{attrs:{id:"回顾上期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#回顾上期","aria-hidden":"true"}},[a._v("#")]),a._v(" 回顾上期")]),a._v(" "),s("p",[a._v("上期我们提出的问题是：")]),a._v(" "),s("p",[a._v("⭐️ "),s("strong",[a._v("请你谈谈 "),s("code",[a._v("Webpack")]),a._v(" 中构建过程和打包原理")])]),a._v(" "),s("h2",{attrs:{id:"答案公布"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#答案公布","aria-hidden":"true"}},[a._v("#")]),a._v(" 答案公布")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://blog-img-1252360401.cos.ap-guangzhou.myqcloud.com/20191128-1.jpg",alt:"webpack"}})]),a._v(" "),s("p",[a._v("在我写今天这篇文章之前，")]),a._v(" "),s("p",[s("code",[a._v("Webpack")]),a._v(" 的最新版本号已经进入到了 v5 时代，")]),a._v(" "),s("p",[a._v("尽管版本号的进展日新月异，")]),a._v(" "),s("p",[a._v("但究其始终，")]),a._v(" "),s("p",[a._v("其最终的目的是没有变的，")]),a._v(" "),s("p",[a._v("我们今天来看看 "),s("code",[a._v("Webpack")]),a._v(" 中的那些基础知识。 😄")]),a._v(" "),s("h3",{attrs:{id:"webpack-基础概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-基础概念","aria-hidden":"true"}},[a._v("#")]),a._v(" Webpack 基础概念 🎏")]),a._v(" "),s("p",[a._v("在 "),s("code",[a._v("Webpack")]),a._v(" 文档中我们可以清楚看到有那么几个基础概念：")]),a._v(" "),s("ul",[s("li",[a._v("⭐️ 入口（entry）：指示 "),s("code",[a._v("Webpack")]),a._v(" 的依赖梳理工作入口")]),a._v(" "),s("li",[a._v("⭐️ 输出（output）：指示在哪里输出以及怎样命名创建好的 "),s("code",[a._v("bundle")]),a._v("（处理好的文件），默认放置于 "),s("code",[a._v("dist")]),a._v(" 文件夹")]),a._v(" "),s("li",[a._v("⭐️ loader：处理 "),s("code",[a._v("Webpack")]),a._v(" 所不能处理的其他类型的文件的转换工作（Webpack 只能处理 JS 和 JSON 文件）")]),a._v(" "),s("li",[a._v("⭐️ plugin: 处理 "),s("code",[a._v("loader")]),a._v(" 不能执行的其他任务，例如打包优化、资源管理、注入环境变量等")]),a._v(" "),s("li",[a._v("⭐️ 模式（mode）：可选值为 "),s("code",[a._v("development")]),a._v("、"),s("code",[a._v("production")]),a._v(" 和 "),s("code",[a._v("none")]),a._v("，可以设置对应环境下的打包处理")]),a._v(" "),s("li",[a._v("⭐️ 浏览器兼容性（browser compatibility）："),s("code",[a._v("Webpack")]),a._v(" 支持所有 "),s("code",[a._v("ES5")]),a._v(" 标准的浏览器，如果想要使用 "),s("code",[a._v("import()")]),a._v(" 和 "),s("code",[a._v("require.ensure()")]),a._v(" 那么还需要环境支持 "),s("code",[a._v("Promise")])])]),a._v(" "),s("h3",{attrs:{id:"webpack-构建过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-构建过程","aria-hidden":"true"}},[a._v("#")]),a._v(" Webpack 构建过程 🎏")]),a._v(" "),s("p",[a._v("在 "),s("code",[a._v("Webpack")]),a._v(" 中的打包过程是一个线性的过程，")]),a._v(" "),s("p",[a._v("其从启动到结束依次会有如下阶段：")]),a._v(" "),s("ul",[s("li",[a._v("1️⃣ 初始化参数： 从 "),s("code",[a._v("shell")]),a._v(" 参数和配置文件合并参数，得到最终参数")]),a._v(" "),s("li",[a._v("2️⃣ 开始编译： 从上一步获得的参数初始化 "),s("code",[a._v("Compiler")]),a._v(" 对象，注册和加载所有配置的插件，执行对象的 "),s("code",[a._v("run")]),a._v(" 方法开始执行编译")]),a._v(" "),s("li",[a._v("3️⃣ 确定入口： 根据配置中的 "),s("code",[a._v("entry")]),a._v(" 确定入口")]),a._v(" "),s("li",[a._v("4️⃣ 编译模块： 从入门文件出发，构建 "),s("code",[a._v("AST")]),a._v(" 语法树，调用配置中的 "),s("code",[a._v("loader")]),a._v(" 模块进行模块翻译，再递归对该模块依赖的模块进行处理，直至所有文件都已处理完")]),a._v(" "),s("li",[a._v("5️⃣ 完成模块编译： 经过第四步后得到翻译后的最终内容及其依赖关系")]),a._v(" "),s("li",[a._v("6️⃣ 输出资源： 根据入口跟模块的依赖关系，组成包含多个模块的 "),s("code",[a._v("chunk")]),a._v(" 并转换成一个单独的文件加入到输出列表，这一步是修改输出内容的最后机会")]),a._v(" "),s("li",[a._v("7️⃣ 输出完成： 确定输出内容后根据 "),s("code",[a._v("output")]),a._v(" 配置将文件内容写入")])]),a._v(" "),s("h3",{attrs:{id:"自定义-webpack-扩展"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义-webpack-扩展","aria-hidden":"true"}},[a._v("#")]),a._v(" 自定义 Webpack 扩展 🎏")]),a._v(" "),s("p",[a._v("梳理到这我们可以看出，")]),a._v(" "),s("p",[s("code",[a._v("Webpack")]),a._v(" 并非黑魔法，")]),a._v(" "),s("p",[a._v("只是兢兢业业的帮我们处理了那些 "),s("code",[a._v("脏活累活")]),a._v("。")]),a._v(" "),s("p",[a._v("我们完成根据需要编写属于自己的 "),s("code",[a._v("Webpack")]),a._v(" 扩展，")]),a._v(" "),s("p",[s("strong",[a._v("🚀 自定义 loader")])]),a._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// square loader")]),a._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[a._v("exports")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[a._v("num")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" num "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" num"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("p",[a._v("从上面的例子可以看出，")]),a._v(" "),s("p",[a._v("所谓的 "),s("code",[a._v("loader")]),a._v(" 其实只不过是一个处理函数，")]),a._v(" "),s("p",[a._v("将传入的东西进行一定的处理再返回，")]),a._v(" "),s("p",[a._v("实现的是 "),s("code",[a._v("转换")]),a._v(" 的功能。")]),a._v(" "),s("p",[s("strong",[a._v("🚀 自定义 plugin")])]),a._v(" "),s("p",[a._v("这里以大佬写的例子为引：")]),a._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("EndWebpackPlugin")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[a._v("doneCallback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" failCallback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("doneCallback "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" doneCallback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("failCallback "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" failCallback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apply")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[a._v("compiler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 监听webpack生命周期里的事件，做相应的处理")]),a._v("\n        compiler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("plugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'done'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[a._v("stats")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=>")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("doneCallback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("stats"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        compiler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("plugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'failed'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[a._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=>")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("failCallback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" EndWebpackPlugin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br")])]),s("p",[s("code",[a._v("plugin")]),a._v(" 的导出需要的是一个 "),s("code",[a._v("class")]),a._v("，")]),a._v(" "),s("p",[a._v("插件需要的参数通过构造函数传入。")]),a._v(" "),s("p",[a._v("在 "),s("code",[a._v("Webpack")]),a._v(" 启动后会先实例化 "),s("code",[a._v("plugin")]),a._v(" 接着调用 "),s("code",[a._v("apply")]),a._v(" 方法，")]),a._v(" "),s("p",[a._v("插件中需要在 "),s("code",[a._v("apply")]),a._v(" 方法中监听 "),s("code",[a._v("Webpack")]),a._v(" 的生命周期并进行相应的处理。")]),a._v(" "),s("p",[a._v("有两个核心概念需要我们知道：")]),a._v(" "),s("ul",[s("li",[a._v("⭐️ "),s("code",[a._v("Compiler")]),a._v("：从 "),s("code",[a._v("Webpack")]),a._v(" 启动到退出只存在一个 "),s("code",[a._v("Compiler")]),a._v("，其中存放着 "),s("code",[a._v("Webpack")]),a._v(" 的配置")]),a._v(" "),s("li",[a._v("⭐️ "),s("code",[a._v("Compilation")]),a._v("：代表一次编译")])]),a._v(" "),s("h3",{attrs:{id:"参考资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[a._v("#")]),a._v(" 参考资料 🎏")]),a._v(" "),s("ul",[s("li",[a._v("https://imweb.io/topic/59324940b9b65af940bf58ae")]),a._v(" "),s("li",[a._v("https://juejin.im/post/5b0e92caf265da08fa734201")]),a._v(" "),s("li",[a._v("https://juejin.im/post/5d199ab15188255d6924028b")])]),a._v(" "),s("h2",{attrs:{id:"提问"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#提问","aria-hidden":"true"}},[a._v("#")]),a._v(" 提问")]),a._v(" "),s("p",[a._v("讲解完了昨天的问题，又到了今天的提问环节啦~")]),a._v(" "),s("h3",{attrs:{id:"背景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#背景","aria-hidden":"true"}},[a._v("#")]),a._v(" 背景 🎏")]),a._v(" "),s("p",[a._v("今天我们介绍了 "),s("code",[a._v("Webpack")]),a._v(" 世界中的一些基础概念，")]),a._v(" "),s("p",[a._v("相信了解过的你会知道这项技能对于我们来说有多么重要。")]),a._v(" "),s("p",[a._v("让我们继续深入挖掘吧~")]),a._v(" "),s("h3",{attrs:{id:"今日提问"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#今日提问","aria-hidden":"true"}},[a._v("#")]),a._v(" 今日提问 🎏")]),a._v(" "),s("p",[a._v("“惆怅玉颜成间阻，何事东风，不作繁华主。”")]),a._v(" "),s("hr"),a._v(" "),s("p",[s("strong",[a._v("今天的问题是：")])]),a._v(" "),s("p",[a._v("⭐️ "),s("strong",[a._v("请你谈谈 "),s("code",[a._v("Webpack")]),a._v(" 的生命周期以及常用的 "),s("code",[a._v("loader")]),a._v(" 和 "),s("code",[a._v("plugin")])])])])},[],!1,null,null,null);t.default=e.exports}}]);