<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>每日练题#9 | Clancy小屋</title>
    <meta name="description" content="慢慢来   比较快">
    <link rel="icon" href="icon.ico">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta property="article:published_time" content="2019-10-30T00:00:00.000Z"><meta property="article:modified_time" content="2019-10-30T08:08:34.000Z"><meta property="og:site_name" content="Clancy小屋"><meta property="og:title" content="每日练题#9"><meta property="og:type" content="website"><meta property="og:url" content="/DailyTest/2019-10-30-9.html"><meta name="twitter:title" content="每日练题#9"><meta name="twitter:url" content="/DailyTest/2019-10-30-9.html"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:label1" content="Written by"><meta name="twitter:label2" content="Filed under"><meta name="twitter:data2" content="DailyTest"><meta property="article:tag" content="DailyTest">
    <link rel="preload" href="/assets/css/0.styles.19997978.css" as="style"><link rel="preload" href="/assets/js/app.21386047.js" as="script"><link rel="preload" href="/assets/js/3.b415292c.js" as="script"><link rel="preload" href="/assets/js/2.5bb3cc47.js" as="script"><link rel="preload" href="/assets/js/1.e6878f8a.js" as="script"><link rel="preload" href="/assets/js/17.28188ee5.js" as="script"><link rel="prefetch" href="/assets/js/10.8ac7dc68.js"><link rel="prefetch" href="/assets/js/11.d3148dcb.js"><link rel="prefetch" href="/assets/js/12.319aab6c.js"><link rel="prefetch" href="/assets/js/13.f3f15c9f.js"><link rel="prefetch" href="/assets/js/14.a5314aae.js"><link rel="prefetch" href="/assets/js/15.6d0d3736.js"><link rel="prefetch" href="/assets/js/16.d94b78c9.js"><link rel="prefetch" href="/assets/js/18.77d6c522.js"><link rel="prefetch" href="/assets/js/19.c1621821.js"><link rel="prefetch" href="/assets/js/20.2a234325.js"><link rel="prefetch" href="/assets/js/21.13b0733b.js"><link rel="prefetch" href="/assets/js/22.f1d36600.js"><link rel="prefetch" href="/assets/js/23.377b1b22.js"><link rel="prefetch" href="/assets/js/24.2ce202b6.js"><link rel="prefetch" href="/assets/js/25.1a51bbd6.js"><link rel="prefetch" href="/assets/js/26.85df4427.js"><link rel="prefetch" href="/assets/js/27.fcaa99e3.js"><link rel="prefetch" href="/assets/js/28.e8e8ba0b.js"><link rel="prefetch" href="/assets/js/29.ec83ede7.js"><link rel="prefetch" href="/assets/js/30.2d773599.js"><link rel="prefetch" href="/assets/js/31.188ac7d3.js"><link rel="prefetch" href="/assets/js/32.5ac67534.js"><link rel="prefetch" href="/assets/js/33.2c9ec258.js"><link rel="prefetch" href="/assets/js/34.6b9d7be4.js"><link rel="prefetch" href="/assets/js/35.f5eb46ef.js"><link rel="prefetch" href="/assets/js/36.de791992.js"><link rel="prefetch" href="/assets/js/37.ab318eda.js"><link rel="prefetch" href="/assets/js/38.9e22c914.js"><link rel="prefetch" href="/assets/js/39.a3e26c8d.js"><link rel="prefetch" href="/assets/js/40.db20de6e.js"><link rel="prefetch" href="/assets/js/41.84acc8b2.js"><link rel="prefetch" href="/assets/js/42.a7608755.js"><link rel="prefetch" href="/assets/js/43.d49b3f27.js"><link rel="prefetch" href="/assets/js/44.7826beea.js"><link rel="prefetch" href="/assets/js/45.e134bf16.js"><link rel="prefetch" href="/assets/js/46.1691b505.js"><link rel="prefetch" href="/assets/js/47.de02dd91.js"><link rel="prefetch" href="/assets/js/48.9d933ad0.js"><link rel="prefetch" href="/assets/js/49.cb50b959.js"><link rel="prefetch" href="/assets/js/5.f6389712.js"><link rel="prefetch" href="/assets/js/50.57a15a56.js"><link rel="prefetch" href="/assets/js/51.8c7011a9.js"><link rel="prefetch" href="/assets/js/52.32d427c3.js"><link rel="prefetch" href="/assets/js/53.2b6ca8ae.js"><link rel="prefetch" href="/assets/js/54.cf269526.js"><link rel="prefetch" href="/assets/js/55.d9c96107.js"><link rel="prefetch" href="/assets/js/56.c7e3df0c.js"><link rel="prefetch" href="/assets/js/57.3f085484.js"><link rel="prefetch" href="/assets/js/58.11eef191.js"><link rel="prefetch" href="/assets/js/59.835136f2.js"><link rel="prefetch" href="/assets/js/6.6855f3d5.js"><link rel="prefetch" href="/assets/js/60.4ebd590d.js"><link rel="prefetch" href="/assets/js/61.0cad5248.js"><link rel="prefetch" href="/assets/js/62.a748f9fe.js"><link rel="prefetch" href="/assets/js/63.fa0bdaa4.js"><link rel="prefetch" href="/assets/js/64.11ace4dd.js"><link rel="prefetch" href="/assets/js/65.e44e8456.js"><link rel="prefetch" href="/assets/js/66.7afc3d15.js"><link rel="prefetch" href="/assets/js/67.587f9bee.js"><link rel="prefetch" href="/assets/js/68.6ea385e8.js"><link rel="prefetch" href="/assets/js/69.35bfafa0.js"><link rel="prefetch" href="/assets/js/7.8b56e7b5.js"><link rel="prefetch" href="/assets/js/70.a4b6d1b8.js"><link rel="prefetch" href="/assets/js/71.8532ebff.js"><link rel="prefetch" href="/assets/js/72.dfd1a0fd.js"><link rel="prefetch" href="/assets/js/73.83f203a4.js"><link rel="prefetch" href="/assets/js/74.273b7352.js"><link rel="prefetch" href="/assets/js/75.fec523f9.js"><link rel="prefetch" href="/assets/js/76.ab92f095.js"><link rel="prefetch" href="/assets/js/77.865b3eee.js"><link rel="prefetch" href="/assets/js/78.c8f0f81b.js"><link rel="prefetch" href="/assets/js/79.c5457824.js"><link rel="prefetch" href="/assets/js/8.98060d06.js"><link rel="prefetch" href="/assets/js/80.86b24084.js"><link rel="prefetch" href="/assets/js/9.142606f3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.19997978.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="bg-container"><div id="particles-oli-wrapper" data-v-c339c0f6></div></div> <div class="main-container common"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://blog-img-1252360401.cos.ap-guangzhou.myqcloud.com/logo.jpg" alt="Clancy小屋" class="logo"> <span class="site-name">Clancy小屋</span></a> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-gitlab"></i>
  首页
</a></div><div class="nav-item"><a href="/category/ET/" class="nav-link"><i class="iconfont reco-eye"></i>
  教育技术
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/category/Front/" class="nav-link"><i class="iconfont undefined"></i>
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/category/TS/" class="nav-link"><i class="iconfont undefined"></i>
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/category/Comment/" class="nav-link"><i class="iconfont undefined"></i>
  杂谈
</a></li><li class="dropdown-item"><!----> <a href="/DailyTest/Navigator.html" class="nav-link"><i class="iconfont undefined"></i>
  练题笔记
</a></li></ul></div></div><div class="nav-item"><a href="/timeLine.html" class="nav-link"><i class="iconfont reco-three"></i>
  时光机
</a></div><div class="nav-item"><a href="/AboutMe.html" class="nav-link"><i class="iconfont reco-other"></i>
  关于我
</a></div> <!----></nav> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></header> <div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;background-color:rgba(231, 234, 241,.5);display:none;" data-v-6656a0de data-v-6656a0de><i class="iconfont reco-up" data-v-6656a0de></i></div> <div id="common" class="theme-container"><!----> <div id="mainContent" class="common-content"><div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-gitlab"></i>
  首页
</a></div><div class="nav-item"><a href="/category/ET/" class="nav-link"><i class="iconfont reco-eye"></i>
  教育技术
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/category/Front/" class="nav-link"><i class="iconfont undefined"></i>
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/category/TS/" class="nav-link"><i class="iconfont undefined"></i>
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/category/Comment/" class="nav-link"><i class="iconfont undefined"></i>
  杂谈
</a></li><li class="dropdown-item"><!----> <a href="/DailyTest/Navigator.html" class="nav-link"><i class="iconfont undefined"></i>
  练题笔记
</a></li></ul></div></div><div class="nav-item"><a href="/timeLine.html" class="nav-link"><i class="iconfont reco-three"></i>
  时光机
</a></div><div class="nav-item"><a href="/AboutMe.html" class="nav-link"><i class="iconfont reco-other"></i>
  关于我
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>每日练题#9</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/DailyTest/2019-10-30-9.html#回顾上期" class="sidebar-link">回顾上期</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/DailyTest/2019-10-30-9.html#答案公布" class="sidebar-link">答案公布</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/DailyTest/2019-10-30-9.html#eventemitter-是什么" class="sidebar-link">EventEmitter 是什么 🎏</a></li><li class="sidebar-sub-header"><a href="/DailyTest/2019-10-30-9.html#基础实现" class="sidebar-link">基础实现 🎏</a></li><li class="sidebar-sub-header"><a href="/DailyTest/2019-10-30-9.html#node-js-中的相关实现-api" class="sidebar-link">Node.js 中的相关实现 API 🎏</a></li><li class="sidebar-sub-header"><a href="/DailyTest/2019-10-30-9.html#具体实现" class="sidebar-link">具体实现 🎏</a></li><li class="sidebar-sub-header"><a href="/DailyTest/2019-10-30-9.html#参考资料" class="sidebar-link">参考资料 🎏</a></li></ul></li><li><a href="/DailyTest/2019-10-30-9.html#提问" class="sidebar-link">提问</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/DailyTest/2019-10-30-9.html#背景" class="sidebar-link">背景 🎏</a></li><li class="sidebar-sub-header"><a href="/DailyTest/2019-10-30-9.html#今日提问" class="sidebar-link">今日提问 🎏</a></li></ul></li></ul></section></li></ul> </aside> <div><div><main class="page reco-hide"> <div class="page-title"><h1>每日练题#9</h1> <hr> <div style="position:relative;" data-v-6e6f5ac2><i class="iconfont reco-account" data-v-6e6f5ac2><span data-v-6e6f5ac2>Clancy Lin</span></i> <i class="iconfont reco-date" data-v-6e6f5ac2><span data-v-6e6f5ac2>2019-10-30</span></i> <!----> <i class="iconfont reco-tag tags" data-v-6e6f5ac2><span class="tag-item" data-v-6e6f5ac2>DailyTest</span></i> <span class="pageFull" data-v-6e6f5ac2>全屏</span></div></div> <div class="content__default"><p>欢迎回来！ 😄</p> <p>这里是每日练题系列。</p> <p>这个系列会先分享昨天问题的答案并提出新的问题。</p> <h2 id="回顾上期"><a href="#回顾上期" aria-hidden="true" class="header-anchor">#</a> 回顾上期</h2> <p>上期我们提出的问题是：</p> <p>⭐️ <strong>请你实现 <code>发布-订阅模式</code> 中的 <code>EventEmitter</code></strong></p> <h2 id="答案公布"><a href="#答案公布" aria-hidden="true" class="header-anchor">#</a> 答案公布</h2> <p><code>发布-订阅模式</code> 在 <code>JavaScript</code> 中我们印象最深刻的应用就是网页编程中的事件了。</p> <p>其中比较常见的高级应用有：</p> <ul><li>⭐️ <code>Vue</code> 使用该模式实现观察者队列。</li> <li>⭐️ <code>Node.js</code> 使用该模式实现事件流。</li></ul> <h3 id="eventemitter-是什么"><a href="#eventemitter-是什么" aria-hidden="true" class="header-anchor">#</a> EventEmitter 是什么 🎏</h3> <p><code>EventEmitter</code> 是 <code>Node.js</code> 中的事件流模型，基于 <code>发布-订阅</code> 模式构建。</p> <p>其中 <code>发布-订阅</code> 模式解决了我们需要 <code>一对多</code> 的需求，也即是当我们操作某个特定对象时所有监听者都会得到通知。</p> <p>其最基础的功能其实只有两个：</p> <ul><li>⭐️ 增加监听者</li> <li>⭐️ 移除监听者</li></ul> <p>我们这里会先实现 <code>Node.js</code> 中基础的事件流功能，并在此基础上增加一些自定义的函数。</p> <h3 id="基础实现"><a href="#基础实现" aria-hidden="true" class="header-anchor">#</a> 基础实现 🎏</h3> <p>话不多说，直接上代码：</p> <div class="tip custom-block"><p>9102 年了，所以本文的代码都使用 <code>class</code> 关键字构建，需要旧版本的请自己 <code>babel</code> 一下。</p></div> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 发布-订阅模式</span>
<span class="token keyword">class</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">{</span>
  <span class="token comment">// 初始化事件队列</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handler<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 添加监听函数， eventName 事件名 callback 处理函数</span>
  <span class="token function">addListener</span><span class="token punctuation">(</span><span class="token parameter">eventName<span class="token punctuation">,</span>callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>handles<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>handles<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>handles<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>handles<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handles<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 触发对应回调函数 eventName 事件名 ...arg 传入参数</span>
  <span class="token comment">// 执行指定队列</span>
  <span class="token function">emit</span><span class="token punctuation">(</span><span class="token parameter">eventName<span class="token punctuation">,</span><span class="token operator">...</span>arg</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handles<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>handles<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>handles<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> test <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 绑定事件</span>
test<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token string">'say'</span><span class="token punctuation">,</span> <span class="token parameter">str</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">say </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>str<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 触发事件</span>
test<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'say'</span><span class="token punctuation">,</span> <span class="token string">'hello'</span><span class="token punctuation">)</span>   <span class="token comment">// say hello</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="node-js-中的相关实现-api"><a href="#node-js-中的相关实现-api" aria-hidden="true" class="header-anchor">#</a> Node.js 中的相关实现 API 🎏</h3> <p><strong><code>Node.js</code> 中提供的 <code>Events</code> 方法</strong></p> <table><thead><tr><th>API</th> <th>Description</th></tr></thead> <tbody><tr><td>addListener(event, listener)</td> <td>在指定事件的响应数组尾部添加处理函数。</td></tr> <tr><td>prependListener(event,listener)</td> <td>在指定事件的响应数组头部添加处理函数。</td></tr> <tr><td>on(event, listener)</td> <td>addListener 别名。</td></tr> <tr><td>once(event, listener)</td> <td>只触发一次的 addListener，且触发后移除。</td></tr> <tr><td>removeListener(event, listener)</td> <td>移除特定事件的特定监听器</td></tr> <tr><td>off(event, listener)</td> <td>removeListener 别名。</td></tr> <tr><td>removeAllListeners([event])</td> <td>如无指定事件则移除所有监听器否则移除指定事件的所有监听器</td></tr> <tr><td>setMaxListeners(n)</td> <td>默认监听器超过十个会报错，使用该 API 修改默认限制数量</td></tr> <tr><td>listeners(event)</td> <td>返回指定事件的所有监听器</td></tr> <tr><td>emit(event, [arg1], [arg2], [...])</td> <td>按顺序执行特定事件的监听器，参数顺序与监听器顺序对应，如果有监听器返回 true，否则 false</td></tr></tbody></table> <p><strong><code>Node.js</code> 中提供的 <code>Events</code> 事件</strong></p> <table><thead><tr><th>event</th> <th>Description</th></tr></thead> <tbody><tr><td>newListener</td> <td>新增新事件监听器触发</td></tr> <tr><td>removeListener</td> <td>监听器被删除时触发</td></tr></tbody></table> <div class="tip custom-block"><p>其实可以把事件看做是默认实现的监听，触发过程实则是在监听队列中新增加处理函数。 😄</p></div> <h3 id="具体实现"><a href="#具体实现" aria-hidden="true" class="header-anchor">#</a> 具体实现 🎏</h3> <p>知道了要做什么之后我们开始来一步一步实现 <code>EventEmitter</code> 类：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">EventEmitter</span> <span class="token punctuation">{</span>
  <span class="token comment">// 初始化</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_events <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 定义事件对象</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>_events <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 初始化计数器, 用于统计 events 对象有多少个属性</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>_eventCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 执行函数</span>
  <span class="token comment">// type 事件名 args 传入参数</span>
  <span class="token function">emit</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> events <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_events<span class="token punctuation">;</span>
    <span class="token keyword">const</span> handler <span class="token operator">=</span> events<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 判断该事件存储下是函数还是数组</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> handler <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">Reflect</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>handler<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> len <span class="token operator">=</span> handler<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
      <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
      handler<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">Reflect</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>handler<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 前面说过 on 与 addEventListener 是等价的</span>
  <span class="token comment">// 这里为了简便实用 on 实现</span>
  <span class="token comment">// type 事件名 listener 处理函数 prepend 是否从头部插入</span>
  <span class="token function">on</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> listener<span class="token punctuation">,</span> prepend</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 缓存大对象</span>
    <span class="token keyword">let</span> events <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_events<span class="token punctuation">;</span>
    <span class="token comment">// 用于存储指定事件的处理数组</span>
    <span class="token keyword">let</span> existing <span class="token operator">=</span> events<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 触发'事件增加'事件</span>
    events<span class="token punctuation">.</span>newListener <span class="token operator">!==</span> <span class="token keyword">undefined</span> 
      <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'newListener'</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> listener<span class="token punctuation">)</span><span class="token punctuation">;</span> 
      <span class="token punctuation">:</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'没有定义newListener事件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 判断当前是否存在处理</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>existing <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 若不存在则新增</span>
      existing <span class="token operator">=</span> events<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> listener<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>_eventCount<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 判断是函数还是数组做对应处理</span>
      <span class="token comment">// 注意判断插入位置</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> existing <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        existing <span class="token operator">=</span> events<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> prepend <span class="token operator">?</span> <span class="token punctuation">[</span>listener<span class="token punctuation">,</span> existing<span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span>existing<span class="token punctuation">,</span> listener<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        prepend <span class="token operator">?</span> existing<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span> <span class="token punctuation">:</span> existing<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 最后返回当前实例方便链式调用</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
<span class="token comment">// addEventListener</span>
<span class="token class-name">EventEmitter</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>addEventListener <span class="token operator">=</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>on<span class="token punctuation">;</span>
<span class="token comment">// prependListener</span>
<span class="token class-name">EventEmitter</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">prependListener</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> listener</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> listener<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br></div></div><p>到这里我们已经实现了 <code>新增监听者</code> 和 <code>发布事件</code>， 我们还有 <code>移除</code> 和 <code>修改监听器长度限制</code> 功能尚未实现：</p> <p>那我们接着往下看 😏</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// removeListener</span>
<span class="token function">removeListener</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> listener</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> events <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_events<span class="token punctuation">;</span>
  <span class="token keyword">let</span> existing <span class="token operator">=</span> events<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// 如果不存在直接结束</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>existing<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 如果对应属性的值是一个函数，说明事件只被一个函数所监听</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>existing <span class="token operator">===</span> listener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 只剩最后一个时直接赋一个空对象</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">--</span><span class="token keyword">this</span><span class="token punctuation">.</span>_eventCount <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>_events <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">delete</span> existing<span class="token punctuation">;</span>
      <span class="token comment">// 触发移除事件监听函数</span>
      events<span class="token punctuation">.</span>removeListener <span class="token operator">!==</span> <span class="token keyword">undefined</span> 
        <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'removeListener'</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> listener<span class="token punctuation">)</span>
        <span class="token punctuation">:</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'没有定义removeListener事件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果是数组</span>
    <span class="token comment">// 遍历数组找到该函数的位置</span>
    <span class="token keyword">let</span> position <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> existing<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>existing<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> listener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        position <span class="token operator">=</span> i<span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 判断处理情况</span>
    <span class="token comment">// 没有找到</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 根据返回位置</span>
    position <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> existing<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">:</span> existing<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 如果只剩一个</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>existing<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> events<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> existing<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
    <span class="token comment">// 如果不存在了</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>existing<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> events<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
    <span class="token comment">// 抛出事件</span>
    <span class="token comment">// 触发移除事件监听函数</span>
    events<span class="token punctuation">.</span>removeListener <span class="token operator">!==</span> <span class="token keyword">undefined</span> 
      <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'removeListener'</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> listener<span class="token punctuation">)</span>
      <span class="token punctuation">:</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'没有定义removeListener事件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// removeAllListener</span>
  <span class="token function">removeAllListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果不存在直接结束</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>_events<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_events<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
    <span class="token comment">// 抛出事件</span>
    <span class="token comment">// 触发移除事件监听函数</span>
    events<span class="token punctuation">.</span>removeListener <span class="token operator">!==</span> <span class="token keyword">undefined</span> 
      <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'removeListener'</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> listener<span class="token punctuation">)</span>
      <span class="token punctuation">:</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'没有定义removeListener事件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br></div></div><p>至此最基础的部分我们已经实现完成啦~ 😏</p> <p>后面 <code>once</code>、<code>setMaxListeners</code> 的实现可以通过上面方法的再封装进行书写，就留给大家练手啦。 🚀</p> <h3 id="参考资料"><a href="#参考资料" aria-hidden="true" class="header-anchor">#</a> 参考资料 🎏</h3> <ul><li>https://github.com/forthealllight/blog/issues/21</li> <li>https://www.zhihu.com/question/23486749</li></ul> <h2 id="提问"><a href="#提问" aria-hidden="true" class="header-anchor">#</a> 提问</h2> <p>讲解完了昨天的问题，又到了今天的提问环节啦~</p> <h3 id="背景"><a href="#背景" aria-hidden="true" class="header-anchor">#</a> 背景 🎏</h3> <p><code>数组</code> 是我们平常运用的非常多的一种引用类型，那么对于 <code>数组</code> 原型你真的了解吗？</p> <h3 id="今日提问"><a href="#今日提问" aria-hidden="true" class="header-anchor">#</a> 今日提问 🎏</h3> <p><code>Array.prototype</code> 中浏览器为我们原生实现了很多方法，这些方法你都知道吗？</p> <p>⭐️ <code>reduce()</code> 方法对数组中的每个元素执行一个由您提供的reducer函数(升序执行)，将其结果汇总为单个返回值。</p> <blockquote><p>arr.reduce(callback(accumulator, currentValue[, index[, array]])[, initialValue])</p></blockquote> <p><code>reducer</code> 函数接收4个参数:</p> <ul><li>Accumulator (acc) (累计器)</li> <li>Current Value (cur) (当前值)</li> <li>Current Index (idx) (当前索引)</li> <li>Source Array (src) (源数组)</li></ul> <p>⭐️ <code>map()</code>  方法创建一个新数组，其结果是该数组中的每个元素都调用一个提供的函数后返回的结果。</p> <blockquote><p>arr.map(function callback(currentValue[, index[, array]]) {
// Return element for new_array
}[, thisArg])</p></blockquote> <p>其中</p> <ul><li>callback (回调函数)</li> <li>currentValue (当前元素)</li> <li>index (当前索引) (可选)</li> <li>array (调用的数组) (可选)</li> <li>thisArg (callback 的 this) (可选)</li></ul> <p>今天的问题是：</p> <p>⭐️ <strong>请你说出尽量多的数组原型上的方法并自己实现 <code>Array.reduce</code> 和 <code>Array.map</code> 方法</strong></p></div> <!----> <footer class="page-edit"><!----></footer> <!----> </main></div> <div class="valine-wrapper" data-v-5d2e7f84><div id="valine" data-v-5d2e7f84></div></div></div></div></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.21386047.js" defer></script><script src="/assets/js/3.b415292c.js" defer></script><script src="/assets/js/2.5bb3cc47.js" defer></script><script src="/assets/js/1.e6878f8a.js" defer></script><script src="/assets/js/17.28188ee5.js" defer></script>
  </body>
</html>
