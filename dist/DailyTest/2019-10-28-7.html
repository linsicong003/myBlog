<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>每日练题#7 | Clancy小屋</title>
    <meta name="description" content="慢慢来   比较快">
    <link rel="icon" href="icon.ico">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta property="article:published_time" content="2019-10-28T00:00:00.000Z"><meta property="article:modified_time" content="2019-10-30T08:08:34.000Z"><meta property="og:site_name" content="Clancy小屋"><meta property="og:title" content="每日练题#7"><meta property="og:type" content="website"><meta property="og:url" content="/DailyTest/2019-10-28-7.html"><meta name="twitter:title" content="每日练题#7"><meta name="twitter:url" content="/DailyTest/2019-10-28-7.html"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:label1" content="Written by"><meta name="twitter:label2" content="Filed under"><meta name="twitter:data2" content="DailyTest"><meta property="article:tag" content="DailyTest">
    <link rel="preload" href="/assets/css/0.styles.19997978.css" as="style"><link rel="preload" href="/assets/js/app.2e933218.js" as="script"><link rel="preload" href="/assets/js/3.b415292c.js" as="script"><link rel="preload" href="/assets/js/2.5bb3cc47.js" as="script"><link rel="preload" href="/assets/js/1.e6878f8a.js" as="script"><link rel="preload" href="/assets/js/15.0c829d9c.js" as="script"><link rel="prefetch" href="/assets/js/10.2218a443.js"><link rel="prefetch" href="/assets/js/11.ad5e0bb1.js"><link rel="prefetch" href="/assets/js/12.319aab6c.js"><link rel="prefetch" href="/assets/js/13.f3f15c9f.js"><link rel="prefetch" href="/assets/js/14.a5314aae.js"><link rel="prefetch" href="/assets/js/16.b528e04f.js"><link rel="prefetch" href="/assets/js/17.6adca3ae.js"><link rel="prefetch" href="/assets/js/18.8973fcc9.js"><link rel="prefetch" href="/assets/js/19.4cf114fa.js"><link rel="prefetch" href="/assets/js/20.2a234325.js"><link rel="prefetch" href="/assets/js/21.7454c98e.js"><link rel="prefetch" href="/assets/js/22.f1d36600.js"><link rel="prefetch" href="/assets/js/23.f5cc851a.js"><link rel="prefetch" href="/assets/js/24.e5987bfa.js"><link rel="prefetch" href="/assets/js/25.80bbd491.js"><link rel="prefetch" href="/assets/js/26.85df4427.js"><link rel="prefetch" href="/assets/js/27.fcaa99e3.js"><link rel="prefetch" href="/assets/js/28.30a38c64.js"><link rel="prefetch" href="/assets/js/29.4a01143a.js"><link rel="prefetch" href="/assets/js/30.2d773599.js"><link rel="prefetch" href="/assets/js/31.188ac7d3.js"><link rel="prefetch" href="/assets/js/32.5ac67534.js"><link rel="prefetch" href="/assets/js/33.2c9ec258.js"><link rel="prefetch" href="/assets/js/34.6b9d7be4.js"><link rel="prefetch" href="/assets/js/35.f5eb46ef.js"><link rel="prefetch" href="/assets/js/36.de791992.js"><link rel="prefetch" href="/assets/js/37.f431e2ed.js"><link rel="prefetch" href="/assets/js/38.9e22c914.js"><link rel="prefetch" href="/assets/js/39.72b78c28.js"><link rel="prefetch" href="/assets/js/40.db20de6e.js"><link rel="prefetch" href="/assets/js/41.84acc8b2.js"><link rel="prefetch" href="/assets/js/42.a7608755.js"><link rel="prefetch" href="/assets/js/43.d49b3f27.js"><link rel="prefetch" href="/assets/js/44.a1a05185.js"><link rel="prefetch" href="/assets/js/45.952eaa28.js"><link rel="prefetch" href="/assets/js/46.fef9e55c.js"><link rel="prefetch" href="/assets/js/47.6bc0e4c5.js"><link rel="prefetch" href="/assets/js/48.d7124bde.js"><link rel="prefetch" href="/assets/js/49.3e298871.js"><link rel="prefetch" href="/assets/js/5.f6389712.js"><link rel="prefetch" href="/assets/js/50.57a15a56.js"><link rel="prefetch" href="/assets/js/51.80607a81.js"><link rel="prefetch" href="/assets/js/52.e14fae39.js"><link rel="prefetch" href="/assets/js/53.2b6ca8ae.js"><link rel="prefetch" href="/assets/js/54.cf269526.js"><link rel="prefetch" href="/assets/js/55.3a58f492.js"><link rel="prefetch" href="/assets/js/56.c7e3df0c.js"><link rel="prefetch" href="/assets/js/57.3f085484.js"><link rel="prefetch" href="/assets/js/58.11eef191.js"><link rel="prefetch" href="/assets/js/59.4ba31f5e.js"><link rel="prefetch" href="/assets/js/6.6855f3d5.js"><link rel="prefetch" href="/assets/js/60.03269639.js"><link rel="prefetch" href="/assets/js/61.17f354e4.js"><link rel="prefetch" href="/assets/js/62.114b6997.js"><link rel="prefetch" href="/assets/js/63.53911c87.js"><link rel="prefetch" href="/assets/js/64.0bdab71f.js"><link rel="prefetch" href="/assets/js/65.be877a7f.js"><link rel="prefetch" href="/assets/js/66.6aa3794b.js"><link rel="prefetch" href="/assets/js/67.c462bd8a.js"><link rel="prefetch" href="/assets/js/68.86dd1cf8.js"><link rel="prefetch" href="/assets/js/69.2b1e23ae.js"><link rel="prefetch" href="/assets/js/7.8b56e7b5.js"><link rel="prefetch" href="/assets/js/70.cf6d8573.js"><link rel="prefetch" href="/assets/js/71.8532ebff.js"><link rel="prefetch" href="/assets/js/72.dfd1a0fd.js"><link rel="prefetch" href="/assets/js/73.5b8c26cb.js"><link rel="prefetch" href="/assets/js/74.9ef6950d.js"><link rel="prefetch" href="/assets/js/75.248f283b.js"><link rel="prefetch" href="/assets/js/76.645f2a5b.js"><link rel="prefetch" href="/assets/js/77.98dc7580.js"><link rel="prefetch" href="/assets/js/78.b2946743.js"><link rel="prefetch" href="/assets/js/79.1fa17d17.js"><link rel="prefetch" href="/assets/js/8.98060d06.js"><link rel="prefetch" href="/assets/js/80.86b24084.js"><link rel="prefetch" href="/assets/js/9.142606f3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.19997978.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="bg-container"><div id="particles-oli-wrapper" data-v-c339c0f6></div></div> <div class="main-container common"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://blog-img-1252360401.cos.ap-guangzhou.myqcloud.com/logo.jpg" alt="Clancy小屋" class="logo"> <span class="site-name">Clancy小屋</span></a> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-gitlab"></i>
  首页
</a></div><div class="nav-item"><a href="/category/ET/" class="nav-link"><i class="iconfont reco-eye"></i>
  教育技术
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/category/Front/" class="nav-link"><i class="iconfont undefined"></i>
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/category/TS/" class="nav-link"><i class="iconfont undefined"></i>
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/category/Comment/" class="nav-link"><i class="iconfont undefined"></i>
  杂谈
</a></li><li class="dropdown-item"><!----> <a href="/DailyTest/Navigator.html" class="nav-link"><i class="iconfont undefined"></i>
  练题笔记
</a></li></ul></div></div><div class="nav-item"><a href="/timeLine.html" class="nav-link"><i class="iconfont reco-three"></i>
  时光机
</a></div><div class="nav-item"><a href="/AboutMe.html" class="nav-link"><i class="iconfont reco-other"></i>
  关于我
</a></div> <!----></nav> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></header> <div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;background-color:rgba(231, 234, 241,.5);display:none;" data-v-6656a0de data-v-6656a0de><i class="iconfont reco-up" data-v-6656a0de></i></div> <div id="common" class="theme-container"><!----> <div id="mainContent" class="common-content"><div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-gitlab"></i>
  首页
</a></div><div class="nav-item"><a href="/category/ET/" class="nav-link"><i class="iconfont reco-eye"></i>
  教育技术
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/category/Front/" class="nav-link"><i class="iconfont undefined"></i>
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/category/TS/" class="nav-link"><i class="iconfont undefined"></i>
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/category/Comment/" class="nav-link"><i class="iconfont undefined"></i>
  杂谈
</a></li><li class="dropdown-item"><!----> <a href="/DailyTest/Navigator.html" class="nav-link"><i class="iconfont undefined"></i>
  练题笔记
</a></li></ul></div></div><div class="nav-item"><a href="/timeLine.html" class="nav-link"><i class="iconfont reco-three"></i>
  时光机
</a></div><div class="nav-item"><a href="/AboutMe.html" class="nav-link"><i class="iconfont reco-other"></i>
  关于我
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>每日练题#7</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/DailyTest/2019-10-28-7.html#回顾上期" class="sidebar-link">回顾上期</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/DailyTest/2019-10-28-7.html#答案公布" class="sidebar-link">答案公布</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/DailyTest/2019-10-28-7.html#简易实现" class="sidebar-link">简易实现 🎏</a></li><li class="sidebar-sub-header"><a href="/DailyTest/2019-10-28-7.html#完整实现" class="sidebar-link">完整实现</a></li><li class="sidebar-sub-header"><a href="/DailyTest/2019-10-28-7.html#参考资料" class="sidebar-link">参考资料 🎏</a></li></ul></li><li><a href="/DailyTest/2019-10-28-7.html#提问" class="sidebar-link">提问</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/DailyTest/2019-10-28-7.html#背景" class="sidebar-link">背景 🎏</a></li><li class="sidebar-sub-header"><a href="/DailyTest/2019-10-28-7.html#今日提问" class="sidebar-link">今日提问 🎏</a></li></ul></li></ul></section></li></ul> </aside> <div><div><main class="page reco-hide"> <div class="page-title"><h1>每日练题#7</h1> <hr> <div style="position:relative;" data-v-6e6f5ac2><i class="iconfont reco-account" data-v-6e6f5ac2><span data-v-6e6f5ac2>Clancy Lin</span></i> <i class="iconfont reco-date" data-v-6e6f5ac2><span data-v-6e6f5ac2>2019-10-28</span></i> <!----> <i class="iconfont reco-tag tags" data-v-6e6f5ac2><span class="tag-item" data-v-6e6f5ac2>DailyTest</span></i> <span class="pageFull" data-v-6e6f5ac2>全屏</span></div></div> <div class="content__default"><p>欢迎回来！ 😄</p> <p>这里是每日练题系列。</p> <p>这个系列会先分享昨天问题的答案并提出新的问题。</p> <h2 id="回顾上期"><a href="#回顾上期" aria-hidden="true" class="header-anchor">#</a> 回顾上期</h2> <p>上期我们提出的问题是：</p> <p>⭐️ <strong>请你实现一个 <code>节流函数</code> 和 <code>防抖函数</code></strong></p> <h2 id="答案公布"><a href="#答案公布" aria-hidden="true" class="header-anchor">#</a> 答案公布</h2> <p><code>节流函数(throttle)</code> 实质可以看做 <code>防抖函数(debounce)</code> 的一个设置最大运行时间的版本，这也是我在这里把它们两个放在一起的原因。</p> <p>在这里引用 <code>lodash</code> 对 <code>防抖函数</code> 的介绍：</p> <blockquote><p>Creates a debounced function that delays invoking func until after wait milliseconds have elapsed since the last time the debounced function was invoked. The debounced function comes with a cancel method to cancel delayed func invocations and a flush method to immediately invoke them. Provide options to indicate whether func should be invoked on the leading and/or trailing edge of the wait timeout. The func is invoked with the last arguments provided to the debounced function. Subsequent calls to the debounced function return the result of the last func invocation.</p></blockquote> <p>简单翻译一下就是下面这么个意思：</p> <ul><li>⭐️ <strong>创建一个 <code>防抖函数（debounced function）</code> 将延迟调用传入的处理方法直至最后一个 <code>wait</code> 计时器计时结束。</strong></li> <li>⭐️ 与此同时 <code>防抖函数</code> 还提供一个 <code>cancel</code> 方法来删除被延迟的函数以及一个 <code>flush</code> 方法来马上调用他们，你还可以通过选项的方式来选择在超时的前方或后方进行调用。</li> <li>⭐️ 函数调用时将会使用 <code>最后一次</code> 传入的参数并将作为 <code>防抖函数</code> 的返回结果。</li></ul> <p>🙀 下面我们就一起来看看具体的实现：</p> <h3 id="简易实现"><a href="#简易实现" aria-hidden="true" class="header-anchor">#</a> 简易实现 🎏</h3> <p>问了度娘知道，网上的博客大多流传的是简易版本的防抖函数，具体实现如下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 防抖函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">debounce</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> wait</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer<span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>代码比较简单，这里就不做过多解释了。 😄</p> <p>承接这种思路的 <code>节流函数</code> 的实现方法我们自然而然能想到是这样的：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 节流函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">throttle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> wait</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer<span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>到这可能会有的小伙伴说这个实现也太简单了吧，还有很多都没考虑到 🎐</p> <p>那么下面给出一种多加一些边界情况考虑的实现，同时也是笔者自己用的比较多的一种实现：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 节流函数</span>
<span class="token comment">/**
 * @method
 * @param {function} fn - 处理函数
 * @param {number} delay - 延迟时间
 * @param {number} duration - 最大延迟时间
 * @returns {function} - 被延迟的处理函数
 * @description: 函数节流
 * @author: Clancy Lin
 * @date: 2019-10-28
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">throttle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay<span class="token punctuation">,</span> duration</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fn <span class="token operator">||</span> <span class="token keyword">typeof</span> fn <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">'Please offer a function to solve something'</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>delay<span class="token punctuation">)</span> delay <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>duration<span class="token punctuation">)</span> duration <span class="token operator">=</span> <span class="token number">0</span>
<span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
<span class="token keyword">let</span> begin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> context <span class="token operator">=</span> <span class="token keyword">this</span>
    <span class="token keyword">let</span> args <span class="token operator">=</span> arguments
    <span class="token keyword">let</span> current <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">-</span> begin <span class="token operator">&gt;=</span> duration<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
    begin <span class="token operator">=</span> current
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><div class="tip custom-block"><p>这种实现依然存在问题，表现在函数执行时间不稳定的问题。</p></div> <p>⭐️ 如果只是追求简单实用的童鞋看到这里就够了，<code>节流函数</code> 已经基本实现。</p> <p>可以直接滑到下方看我们今天的问题了。</p> <p>有追求的小伙伴跟着我继续往下面走，下面将以 <code>lodash</code> 的实现来进一步加深对这种 <code>延迟优化</code> 机制的理解。</p> <h3 id="完整实现"><a href="#完整实现" aria-hidden="true" class="header-anchor">#</a> 完整实现</h3> <p>最后应实现这么一个执行流程：</p> <p><img src="https://blog-img-1252360401.cos.ap-guangzhou.myqcloud.com/2019-10-28-1.png" alt="节流执行"></p> <p>下面直接上 loadsh 的源码，相关讲解将放置于注释之中：</p> <p>关于使用方法请直接参考 <code>loadsh</code> 的文档（科学上网）： <a href="https://www.lodashjs.com/docs/4.17.5.html#debounce" target="_blank" rel="noopener noreferrer">传送门<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 防抖函数</span>
<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> wait<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> lastArgs<span class="token punctuation">,</span>
        lastThis<span class="token punctuation">,</span>
        maxWait<span class="token punctuation">,</span>
        result<span class="token punctuation">,</span>
        timerId<span class="token punctuation">,</span>
        lastCallTime

    <span class="token comment">// 参数初始化</span>
    <span class="token keyword">let</span> lastInvokeTime <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// func 上一次执行的时间</span>
    <span class="token keyword">let</span> leading <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token keyword">let</span> maxing <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token keyword">let</span> trailing <span class="token operator">=</span> <span class="token boolean">true</span>

    <span class="token comment">// 基本的类型判断和处理</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> func <span class="token operator">!=</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'Expected a function'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    wait <span class="token operator">=</span> <span class="token operator">+</span>wait <span class="token operator">||</span> <span class="token number">0</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isObject</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 对配置的一些初始化</span>
        leading <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>options<span class="token punctuation">.</span>leading
        maxing <span class="token operator">=</span> <span class="token string">'maxWait'</span> <span class="token keyword">in</span> options
        maxWait <span class="token operator">=</span> maxing <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">+</span>options<span class="token punctuation">.</span>maxWait <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span> <span class="token punctuation">:</span> maxWait
        trailing <span class="token operator">=</span> <span class="token string">'trailing'</span> <span class="token keyword">in</span> options <span class="token operator">?</span> <span class="token operator">!</span><span class="token operator">!</span>options<span class="token punctuation">.</span>trailing <span class="token punctuation">:</span> trailing
    <span class="token punctuation">}</span>

    <span class="token comment">// 调用函数</span>
    <span class="token keyword">function</span> <span class="token function">invokeFunc</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> args <span class="token operator">=</span> lastArgs
        <span class="token keyword">const</span> thisArg <span class="token operator">=</span> lastThis

        lastArgs <span class="token operator">=</span> lastThis <span class="token operator">=</span> <span class="token keyword">undefined</span>
        lastInvokeTime <span class="token operator">=</span> time
        result <span class="token operator">=</span> <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
        <span class="token keyword">return</span> result
    <span class="token punctuation">}</span>

    <span class="token comment">// 无 timerId 执行，首次或者已经调用过</span>
    <span class="token keyword">function</span> <span class="token function">leadingEdge</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Reset any `maxWait` timer.</span>
        lastInvokeTime <span class="token operator">=</span> time
        <span class="token comment">// 为 trailing edge 触发函数调用设定定时器</span>
        timerId <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>timerExpired<span class="token punctuation">,</span> wait<span class="token punctuation">)</span>
        <span class="token comment">// leading = true 执行函数</span>
        <span class="token keyword">return</span> leading <span class="token operator">?</span> <span class="token function">invokeFunc</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span> <span class="token punctuation">:</span> result
    <span class="token punctuation">}</span>

    <span class="token comment">// 计算下次的计时器时间</span>
   <span class="token keyword">function</span> <span class="token function">remainingWait</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> timeSinceLastCall <span class="token operator">=</span> time <span class="token operator">-</span> lastCallTime <span class="token comment">// 距离上次debounced函数被调用的时间</span>
        <span class="token keyword">const</span> timeSinceLastInvoke <span class="token operator">=</span> time <span class="token operator">-</span> lastInvokeTime <span class="token comment">// 距离上次函数被执行的时间</span>
        <span class="token keyword">const</span> timeWaiting <span class="token operator">=</span> wait <span class="token operator">-</span> timeSinceLastCall <span class="token comment">// 用 wait 减去 timeSinceLastCall 计算出下一次trailing的位置</span>

        <span class="token comment">// 两种情况</span>
        <span class="token comment">// 有maxing:比较出下一次maxing和下一次trailing的最小值，作为下一次函数要执行的时间</span>
        <span class="token comment">// 无maxing：在下一次trailing时执行 timerExpired</span>
        <span class="token keyword">return</span> maxing
            <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>timeWaiting<span class="token punctuation">,</span> maxWait <span class="token operator">-</span> timeSinceLastInvoke<span class="token punctuation">)</span>
            <span class="token punctuation">:</span> timeWaiting
    <span class="token punctuation">}</span>

    <span class="token comment">// 根据时间判断 func 能否被执行</span>
    <span class="token keyword">function</span> <span class="token function">shouldInvoke</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> timeSinceLastCall <span class="token operator">=</span> time <span class="token operator">-</span> lastCallTime
        <span class="token keyword">const</span> timeSinceLastInvoke <span class="token operator">=</span> time <span class="token operator">-</span> lastInvokeTime

        <span class="token comment">// 几种满足条件的情况</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>lastCallTime <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token comment">//首次</span>
            <span class="token operator">||</span> <span class="token punctuation">(</span>timeSinceLastCall <span class="token operator">&gt;=</span> wait<span class="token punctuation">)</span> <span class="token comment">// 距离上次被调用已经超过 wait</span>
            <span class="token operator">||</span> <span class="token punctuation">(</span>timeSinceLastCall <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">//系统时间倒退</span>
            <span class="token operator">||</span> <span class="token punctuation">(</span>maxing <span class="token operator">&amp;&amp;</span> timeSinceLastInvoke <span class="token operator">&gt;=</span> maxWait<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//超过最大等待时间</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 生成计时器</span>
    <span class="token comment">// 作用是触发 trailling</span>
    <span class="token keyword">function</span> <span class="token function">timerExpired</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> time <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// 在 trailing edge 且时间符合条件时，调用 trailingEdge函数，否则重启定时器</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">shouldInvoke</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">trailingEdge</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 重启定时器，保证下一次时延的末尾触发</span>
        timerId <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>timerExpired<span class="token punctuation">,</span> <span class="token function">remainingWait</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 最后一次函数执行</span>
    <span class="token keyword">function</span> <span class="token function">trailingEdge</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        timerId <span class="token operator">=</span> <span class="token keyword">undefined</span>

        <span class="token comment">// 有lastArgs才执行，意味着只有 func 已经被 debounced 过一次以后才会在 trailing edge 执行</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>trailing <span class="token operator">&amp;&amp;</span> lastArgs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">invokeFunc</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 每次 trailingEdge 都会清除 lastArgs 和 lastThis，目的是避免最后一次函数被执行了两次</span>
        <span class="token comment">// 举个例子：最后一次函数执行的时候，可能恰巧是前一次的 trailing edge，函数被调用，而这个函数又需要在自己时延的 trailing edge 触发，导致触发多次</span>
        lastArgs <span class="token operator">=</span> lastThis <span class="token operator">=</span> <span class="token keyword">undefined</span>
        <span class="token keyword">return</span> result
    <span class="token punctuation">}</span>

    <span class="token comment">// 删除函数，删除未执行的延迟函数</span>
    <span class="token keyword">function</span> <span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>timerId <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">cancelTimer</span><span class="token punctuation">(</span>timerId<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        lastInvokeTime <span class="token operator">=</span> <span class="token number">0</span>
        lastArgs <span class="token operator">=</span> lastCallTime <span class="token operator">=</span> lastThis <span class="token operator">=</span> timerId <span class="token operator">=</span> <span class="token keyword">undefined</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 立即执行未执行函数</span>
    <span class="token keyword">function</span> <span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> timerId <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> result <span class="token punctuation">:</span> <span class="token function">trailingEdge</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 判断是否被阻塞</span>
    <span class="token keyword">function</span> <span class="token function">pending</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> timerId <span class="token operator">!==</span> <span class="token keyword">undefined</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 防抖主函数</span>
    <span class="token keyword">function</span> <span class="token function">debounced</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> time <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> isInvoking <span class="token operator">=</span> <span class="token function">shouldInvoke</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span> <span class="token comment">//是否满足时间条件</span>

        lastArgs <span class="token operator">=</span> args
        lastThis <span class="token operator">=</span> <span class="token keyword">this</span>
        lastCallTime <span class="token operator">=</span> time  <span class="token comment">//函数被调用的时间</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>isInvoking<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>timerId <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 无timerId的情况有两种：1.首次调用 2.trailingEdge执行过函数</span>
                <span class="token keyword">return</span> <span class="token function">leadingEdge</span><span class="token punctuation">(</span>lastCallTime<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>maxing<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// Handle invocations in a tight loop.</span>
                timerId <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>timerExpired<span class="token punctuation">,</span> wait<span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token function">invokeFunc</span><span class="token punctuation">(</span>lastCallTime<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 负责一种case：trailing 为 true 的情况下，在前一个 wait 的 trailingEdge 已经执行了函数；</span>
        <span class="token comment">// 而这次函数被调用时 shouldInvoke 不满足条件，因此要设置定时器，在本次的 trailingEdge 保证函数被执行</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>timerId <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            timerId <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>timerExpired<span class="token punctuation">,</span> wait<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> result
    <span class="token punctuation">}</span>
    debounced<span class="token punctuation">.</span>cancel <span class="token operator">=</span> cancel
    debounced<span class="token punctuation">.</span>flush <span class="token operator">=</span> flush
    debounced<span class="token punctuation">.</span>pending <span class="token operator">=</span> pending
    <span class="token keyword">return</span> debounced
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br></div></div><p>最后为大家梳理一下 <code>lodash</code> 的实现思路：</p> <ul><li>⭐️ 首次进入时 <code>lastCallTime === undefined</code> 且 <code>timerId === undefined</code> 所以会进入 <code>leadingEdge</code>，此时 <code>leading</code> 为 <code>true</code> 时就会执行 <code>func</code> 并设置定时器。</li> <li>⭐️ 等待 <code>wait</code> 秒后会执行 <code>timerExpired</code>。</li> <li>⭐️ 1️⃣ 若未到 <code>wait</code> 就再次被调用会更新 <code>lastCallTime</code> 且 <code>isInvoking</code> 条件不符合所以不会执行任何操作。</li> <li>⭐️ 2️⃣ 若时间到达 <code>wait</code> 就会执行一开始设定的 <code>timerExpired</code>，且此时 <code>time-lastCallTime &lt; wait</code>， 所以不会执行 <code>trailingEdge</code>。</li> <li>⭐️ 此时又会新增一个计时器，下一次执行的时间是 <code>remainingWait</code> 根据是否有 <code>maxwait</code> 来区分。</li> <li>⭐️ 1️⃣ 没有 <code>maxwait</code>，则定时器时间为 <code>wait - timeSinceLastCall</code>，保证下一次 <code>trailing</code> 的执行。</li> <li>⭐️ 2️⃣ 若有 <code>maxwait</code>，下一次函数要执行的时间为下一次 <code>maxing</code> 和下一次 <code>trailing</code> 的最小值。</li> <li>⭐️ 最后若不再有调用就在计时器结束时调用 <code>trailingEdge</code>。</li></ul> <p>这里不再给出 <code>throttle</code> 的实现代码了，因为其是以 <code>debounce</code> 加上 <code>maxwait</code> 的方式实现的。</p> <p>聪明的你一定知道应该怎么实现了。 😏</p> <h3 id="参考资料"><a href="#参考资料" aria-hidden="true" class="header-anchor">#</a> 参考资料 🎏</h3> <ul><li>https://github.com/ZhangFe/Blog/issues/8</li> <li>https://github.com/lodash/lodash/blob/master/debounce.js</li> <li>https://www.lodashjs.com/docs/4.17.5.html#debounce</li> <li>https://css-tricks.com/debouncing-throttling-explained-examples/</li> <li>https://jinlong.github.io/2016/04/24/Debouncing-and-Throttling-Explained-Through-Examples/</li></ul> <h2 id="提问"><a href="#提问" aria-hidden="true" class="header-anchor">#</a> 提问</h2> <p>讲解完了昨天的问题，又到了今天的提问环节啦~</p> <h3 id="背景"><a href="#背景" aria-hidden="true" class="header-anchor">#</a> 背景 🎏</h3> <p><img src="https://blog-img-1252360401.cos.ap-guangzhou.myqcloud.com/2019-10-28-2.jpg" alt="复制"></p> <p><code>套娃</code> 是指在一定基础上稍稍改动就形成新东西的一种操作。</p> <p>在我们写代码的过程中主要体现为变量的复制，在这里因为底层的优化机制在大部分情况下复制只是 <code>共用内存指针</code> 。</p> <p>这就引出了我们的 <code>深拷贝</code> 与 <code>浅拷贝</code> 的问题。</p> <p>同时 <code>JavaScript高级程序设计（红宝书）</code> 中提到的 <code>JSON.parse()</code> 加 <code>JSON.stringify()</code> 的操作实际存在性能问题。</p> <h3 id="今日提问"><a href="#今日提问" aria-hidden="true" class="header-anchor">#</a> 今日提问 🎏</h3> <p><code>拷贝</code> 是我们绕不过去的坎，那就让我们一起大步迈过去吧！</p> <p>今天的问题是：</p> <p>⭐️ <strong>请你实现一个全类型深拷贝函数及对其进行性能优化</strong></p></div> <!----> <footer class="page-edit"><!----></footer> <!----> </main></div> <div class="valine-wrapper" data-v-5d2e7f84><div id="valine" data-v-5d2e7f84></div></div></div></div></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2e933218.js" defer></script><script src="/assets/js/3.b415292c.js" defer></script><script src="/assets/js/2.5bb3cc47.js" defer></script><script src="/assets/js/1.e6878f8a.js" defer></script><script src="/assets/js/15.0c829d9c.js" defer></script>
  </body>
</html>
